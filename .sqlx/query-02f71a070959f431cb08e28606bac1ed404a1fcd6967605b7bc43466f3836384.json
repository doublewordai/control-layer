{
  "db_name": "PostgreSQL",
  "query": "\n            SELECT\n                ha.fusillade_batch_id as \"batch_id!\",\n                COUNT(*) as \"request_count!\",\n                SUM(ct.amount) as \"total_amount!\",\n                MAX(ct.balance_after) as \"max_balance_after!\",\n                MAX(ct.created_at) as \"max_created_at!\",\n                MIN(ct.id::text)::uuid as \"first_id!\",\n                MIN(ct.user_id::text)::uuid as \"first_user_id!\",\n                MIN(ct.source_id) as \"first_source_id!\",\n                MIN(ct.previous_transaction_id::text)::uuid as \"first_previous_transaction_id\",\n                MIN(ha.model) as \"model\",\n                ARRAY_AGG(ct.source_id) as \"batched_source_ids!\"\n            FROM credits_transactions ct\n            INNER JOIN http_analytics ha ON ct.source_id = ha.id::text\n            WHERE ha.fusillade_batch_id IN (\n                -- Subquery: Find batch_ids present in the provided source_ids\n                SELECT DISTINCT ha2.fusillade_batch_id\n                FROM http_analytics ha2\n                WHERE ha2.id::text = ANY($1) AND ha2.fusillade_batch_id IS NOT NULL\n            )\n            GROUP BY ha.fusillade_batch_id\n            ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "batch_id!",
        "type_info": "Uuid"
      },
      {
        "ordinal": 1,
        "name": "request_count!",
        "type_info": "Int8"
      },
      {
        "ordinal": 2,
        "name": "total_amount!",
        "type_info": "Numeric"
      },
      {
        "ordinal": 3,
        "name": "max_balance_after!",
        "type_info": "Numeric"
      },
      {
        "ordinal": 4,
        "name": "max_created_at!",
        "type_info": "Timestamptz"
      },
      {
        "ordinal": 5,
        "name": "first_id!",
        "type_info": "Uuid"
      },
      {
        "ordinal": 6,
        "name": "first_user_id!",
        "type_info": "Uuid"
      },
      {
        "ordinal": 7,
        "name": "first_source_id!",
        "type_info": "Text"
      },
      {
        "ordinal": 8,
        "name": "first_previous_transaction_id",
        "type_info": "Uuid"
      },
      {
        "ordinal": 9,
        "name": "model",
        "type_info": "Text"
      },
      {
        "ordinal": 10,
        "name": "batched_source_ids!",
        "type_info": "TextArray"
      }
    ],
    "parameters": {
      "Left": [
        "TextArray"
      ]
    },
    "nullable": [
      true,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null
    ]
  },
  "hash": "02f71a070959f431cb08e28606bac1ed404a1fcd6967605b7bc43466f3836384"
}
